<?xml version="1.0" encoding="UTF-8"?>

<component-configuration
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://tis.co.jp/nablarch/component-configuration"
    xsi:schemaLocation="http://tis.co.jp/nablarch/component-configuration  /component-configuration.xsd">

  <!-- データベース設定 -->
  <import file="nablarch/core/db-base.xml" />
   <!-- ステートメントの設定 -->
  <component name="statementFactory"
             class="nablarch.core.db.statement.BasicStatementFactory" autowireType="None">
    <property name="fetchSize" value="${nablarch.statementFactory.fetchSize}"/>
    <property name="queryTimeout" value="${nablarch.statementFactory.queryTimeout}"/>
    <property name="sqlParameterParserFactory">
      <component class="nablarch.core.db.statement.BasicSqlParameterParserFactory"/>
    </property>
    <property name="sqlStatementExceptionFactory" ref="statementExceptionFactory"/>
    <property name="sqlLoader" ref="sqlLoader">
    </property>
  </component>

  <!-- SQL文実行時例外用の設定 -->
  <component name="statementExceptionFactory"
             class="nablarch.core.db.statement.exception.BasicSqlStatementExceptionFactory">
  </component>

  <!-- SQLLoaderの設定 -->
  <component name="sqlLoader" class="nablarch.core.db.statement.BasicSqlLoader">
    <property name="fileEncoding" value="${nablarch.sqlLoader.fileEncoding}"/>
    <property name="extension" value="sql"/>
  </component>
  <!-- データベース処理の設定 -->
  <import file="nablarch/core/db/db-access-exception-factory.xml"/>

  <!-- ダイアレクト設定 -->
  <component name="dialect" class="nablarch.core.db.dialect.OracleDialect" />

  <!-- データソース設定 -->
  <component name="dataSource"
             class="org.apache.commons.dbcp.BasicDataSource">
    <property name="driverClassName" value="${nablarch.db.jdbcDriver}"/>
    <property name="url"             value="${nablarch.db.url}"/>
    <property name="username"        value="${nablarch.db.user}"/>
    <property name="password"        value="${nablarch.db.password}"/>
    <property name="maxActive"       value="${nablarch.db.maxPoolSize}"/>
    <property name="initialSize"     value="${nablarch.db.initialPoolSize}"/>
  </component>

  <!-- データベース接続用設定 -->
  <component name="connectionFactory"
             class="nablarch.core.db.connection.BasicDbConnectionFactoryForDataSource">
    <property name="dialect" ref="dialect" />
    <property name="dataSource" ref="dataSource" />
    <property name="statementFactory" ref="statementFactory" />
    <property name="dbAccessExceptionFactory" ref="dbAccessExceptionFactory" />
  </component>

</component-configuration>